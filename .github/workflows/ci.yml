name: CI

on:
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm

      - run: npm ci

      - run: npm run build
        env:
          NEXT_PUBLIC_FIREBASE_API_KEY: fake
          NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: fake.firebaseapp.com
          NEXT_PUBLIC_FIREBASE_PROJECT_ID: fake
          NEXT_PUBLIC_FIREBASE_APP_ID: fake
          FIREBASE_SERVICE_ACCOUNT: '{"type":"service_account","project_id":"fake","private_key_id":"fake","private_key":"not-a-real-key","client_email":"fake@fake.iam.gserviceaccount.com","client_id":"0","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/fake"}'
